{% extends "base.html" %}

{% block title %}ğŸ“¡ Thronos IoT & Smart City{% endblock %}

{% block styles %}
<style>
    /* Language support */
    .lang-en, .lang-ja, .lang-ru, .lang-es { display: none; }
    body.lang-en .lang-el { display: none; }
    body.lang-en .lang-en { display: inline; }
    body.lang-ja .lang-el { display: none; }
    body.lang-ja .lang-ja { display: inline; }
    body.lang-ru .lang-el { display: none; }
    body.lang-ru .lang-ru { display: inline; }
    body.lang-es .lang-el { display: none; }
    body.lang-es .lang-es { display: inline; }

    .hero-iot {
        background: linear-gradient(135deg, #000 0%, #001a00 50%, #000 100%);
        border: 2px solid;
        border-image: linear-gradient(135deg, #00ff66 0%, #0099ff 100%) 1;
        border-radius: 20px;
        padding: 40px 30px;
        text-align: center;
        margin-bottom: 30px;
    }

    .hero-iot h1 {
        font-size: 2.5em;
        background: linear-gradient(135deg, #00ff66, #0099ff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 15px;
    }

    .hero-iot p {
        color: #888;
        font-size: 1.1em;
        max-width: 700px;
        margin: 0 auto 20px;
    }

    .iot-section {
        margin-bottom: 40px;
    }

    .iot-section h2 {
        color: #00ff66;
        margin-bottom: 20px;
        font-size: 1.5em;
        border-bottom: 1px solid #1a3b2e;
        padding-bottom: 10px;
    }

    .tech-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
    }

    .tech-card {
        background: linear-gradient(135deg, #0a0f0a 0%, #071810 100%);
        border: 1px solid #1a3b2e;
        border-radius: 16px;
        padding: 25px;
        transition: all 0.3s;
    }

    .tech-card:hover {
        border-color: #00ff66;
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0, 255, 102, 0.15);
    }

    .tech-card .icon {
        font-size: 3em;
        margin-bottom: 15px;
    }

    .tech-card h3 {
        color: #00ff66;
        margin-bottom: 10px;
    }

    .tech-card p {
        color: #888;
        font-size: 0.9em;
        line-height: 1.6;
    }

    .tech-features {
        list-style: none;
        padding: 0;
        margin: 15px 0 0 0;
    }

    .tech-features li {
        padding: 5px 0;
        color: #ccc;
        font-size: 0.85em;
        border-bottom: 1px solid #1a3b2e;
    }

    .tech-features li:last-child {
        border-bottom: none;
    }

    .tech-features li::before {
        content: 'âœ“ ';
        color: #00ff66;
    }

    /* Purchase Packs */
    .packs-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 25px;
        margin-top: 20px;
    }

    .pack-card {
        background: linear-gradient(135deg, #0a0a0a 0%, #0a1a10 100%);
        border: 2px solid #1a3b2e;
        border-radius: 20px;
        padding: 30px;
        text-align: center;
        position: relative;
        transition: all 0.3s;
    }

    .pack-card.popular {
        border-color: #ffd700;
        box-shadow: 0 0 30px rgba(255, 215, 0, 0.2);
    }

    .pack-card.popular::before {
        content: 'POPULAR';
        position: absolute;
        top: -12px;
        left: 50%;
        transform: translateX(-50%);
        background: linear-gradient(135deg, #ffd700, #ff9500);
        color: #000;
        padding: 5px 20px;
        border-radius: 20px;
        font-weight: bold;
        font-size: 0.8em;
    }

    .pack-card:hover {
        transform: translateY(-5px);
        border-color: #00ff66;
    }

    .pack-icon {
        font-size: 4em;
        margin-bottom: 15px;
    }

    .pack-name {
        font-size: 1.5em;
        color: #00ff66;
        margin-bottom: 10px;
    }

    .pack-price {
        font-size: 2.5em;
        color: #ffd700;
        font-weight: bold;
    }

    .pack-price small {
        font-size: 0.4em;
        color: #888;
    }

    .pack-features {
        list-style: none;
        padding: 0;
        margin: 20px 0;
        text-align: left;
    }

    .pack-features li {
        padding: 8px 0;
        color: #ccc;
        font-size: 0.9em;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .pack-features li::before {
        content: 'âœ“';
        color: #00ff66;
        font-weight: bold;
    }

    .pack-btn {
        width: 100%;
        padding: 14px;
        background: linear-gradient(135deg, #00ff00 0%, #00ff66 100%);
        border: none;
        border-radius: 10px;
        color: #000;
        font-weight: bold;
        font-size: 1em;
        cursor: pointer;
        transition: all 0.3s;
    }

    .pack-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 20px rgba(0, 255, 102, 0.4);
    }

    .pack-btn.enterprise {
        background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
        color: #fff;
    }

    /* Smart Parking */
    .parking-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
        gap: 10px;
        margin-top: 15px;
    }

    .spot {
        border: 2px solid #333;
        border-radius: 8px;
        padding: 15px 10px;
        text-align: center;
        cursor: pointer;
        transition: all 0.2s;
    }

    .spot.free { border-color: #0f0; background: rgba(0, 255, 0, 0.1); }
    .spot.occupied { border-color: #f00; background: rgba(255, 0, 0, 0.1); opacity: 0.7; cursor: not-allowed; }
    .spot.reserved { border-color: #ff0; background: rgba(255, 255, 0, 0.1); }

    .spot-id { font-weight: bold; font-size: 1.1em; color: #fff; }
    .spot-status { font-size: 0.7em; margin-top: 5px; color: #888; }

    /* Vehicle Brands */
    .vehicle-brands {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        justify-content: center;
        margin: 20px 0;
    }

    .brand-badge {
        background: rgba(0, 0, 0, 0.5);
        border: 1px solid #1a3b2e;
        border-radius: 10px;
        padding: 10px 20px;
        color: #888;
        font-size: 0.9em;
        transition: all 0.3s;
    }

    .brand-badge:hover {
        border-color: #00ff66;
        color: #00ff66;
    }

    .brand-badge.active {
        border-color: #00ff66;
        color: #00ff66;
        background: rgba(0, 255, 102, 0.1);
    }

    /* Water Management */
    .water-panel {
        background: linear-gradient(135deg, #0a0f0a 0%, #001020 100%);
        border: 1px solid #0099ff;
        border-radius: 16px;
        padding: 25px;
    }

    .water-level {
        height: 30px;
        background: #111;
        border-radius: 15px;
        overflow: hidden;
        margin-top: 10px;
        border: 1px solid #333;
    }

    .water-fill {
        height: 100%;
        background: linear-gradient(90deg, #0066ff, #00ccff);
        transition: width 1s;
        display: flex;
        align-items: center;
        justify-content: flex-end;
        padding-right: 10px;
        font-weight: bold;
        color: #fff;
        font-size: 0.8em;
    }

    /* Modal */
    .modal {
        display: none;
        position: fixed;
        top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.85);
        backdrop-filter: blur(8px);
        z-index: 3000;
        justify-content: center;
        align-items: center;
    }

    .modal-content {
        background: linear-gradient(135deg, #0a0f0a 0%, #071810 100%);
        border: 2px solid #00ff66;
        padding: 30px;
        border-radius: 20px;
        max-width: 450px;
        width: 90%;
        text-align: center;
    }

    .stripe-secure {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        margin-top: 20px;
        color: #888;
        font-size: 0.85em;
    }

    .stripe-secure img {
        height: 24px;
    }

    .lang-toggle-iot {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: rgba(0, 255, 102, 0.2);
        border: 1px solid #00ff66;
        color: #00ff66;
        padding: 10px 20px;
        border-radius: 30px;
        cursor: pointer;
        z-index: 100;
    }

    .lang-toggle-iot:hover {
        background: rgba(0, 255, 102, 0.3);
    }
</style>
{% endblock %}

{% block content %}

<div class="hero-iot">
    <h1>ğŸ“¡
        <span class="lang-el">IoT & ÎˆÎ¾Ï…Ï€Î½Î· Î ÏŒÎ»Î·</span>
        <span class="lang-en">IoT & Smart City</span>
        <span class="lang-ja">IoT ï¼† ã‚¹ãƒãƒ¼ãƒˆã‚·ãƒ†ã‚£</span>
        <span class="lang-ru">IoT Ğ¸ Ğ£Ğ¼Ğ½Ñ‹Ğ¹ Ğ³Ğ¾Ñ€Ğ¾Ğ´</span>
        <span class="lang-es">IoT y Ciudad Inteligente</span>
    </h1>
    <p>
        <span class="lang-el">Î£Ï…Î½Î´Î­ÏƒÏ„Îµ Î¿Ï‡Î®Î¼Î±Ï„Î±, Î±Î¹ÏƒÎ¸Î·Ï„Î®ÏÎµÏ‚ ÎºÎ±Î¹ Î­Î¾Ï…Ï€Î½ÎµÏ‚ ÏƒÏ…ÏƒÎºÎµÏ…Î­Ï‚ ÏƒÏ„Î¿ Î´Î¯ÎºÏ„Ï…Î¿ Thronos. ÎšÎµÏÎ´Î¯ÏƒÏ„Îµ THR Î¼Îµ ÎºÎ¬Î¸Îµ Î±Î»Î»Î·Î»ÎµÏ€Î¯Î´ÏÎ±ÏƒÎ·.</span>
        <span class="lang-en">Connect vehicles, sensors, and smart devices to the Thronos network. Earn THR with every interaction.</span>
        <span class="lang-ja">è»Šä¸¡ã€ã‚»ãƒ³ã‚µãƒ¼ã€ã‚¹ãƒãƒ¼ãƒˆãƒ‡ãƒã‚¤ã‚¹ã‚’Thronosãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«æ¥ç¶šã€‚ã™ã¹ã¦ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã§THRã‚’ç²å¾—ã€‚</span>
        <span class="lang-ru">ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚Ğµ Ñ‚Ñ€Ğ°Ğ½ÑĞ¿Ğ¾Ñ€Ñ‚Ğ½Ñ‹Ğµ ÑÑ€ĞµĞ´ÑÑ‚Ğ²Ğ°, Ğ´Ğ°Ñ‚Ñ‡Ğ¸ĞºĞ¸ Ğ¸ ÑƒĞ¼Ğ½Ñ‹Ğµ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ° Ğº ÑĞµÑ‚Ğ¸ Thronos. Ğ—Ğ°Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°Ğ¹Ñ‚Ğµ THR Ñ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¼ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸ĞµĞ¼.</span>
        <span class="lang-es">Conecte vehÃ­culos, sensores y dispositivos inteligentes a la red Thronos. Gane THR con cada interacciÃ³n.</span>
    </p>
</div>

<!-- Supported Technologies -->
<div class="iot-section">
    <h2>ğŸ”Œ
        <span class="lang-el">Î¥Ï€Î¿ÏƒÏ„Î·ÏÎ¹Î¶ÏŒÎ¼ÎµÎ½ÎµÏ‚ Î¤ÎµÏ‡Î½Î¿Î»Î¿Î³Î¯ÎµÏ‚</span>
        <span class="lang-en">Supported Technologies</span>
        <span class="lang-ja">å¯¾å¿œæŠ€è¡“</span>
        <span class="lang-ru">ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸</span>
        <span class="lang-es">TecnologÃ­as Compatibles</span>
    </h2>

    <div class="tech-grid">
        <div class="tech-card">
            <div class="icon">ğŸš—</div>
            <h3>
                <span class="lang-el">ÎˆÎ¾Ï…Ï€Î½Î± ÎŸÏ‡Î®Î¼Î±Ï„Î±</span>
                <span class="lang-en">Smart Vehicles</span>
                <span class="lang-ja">ã‚¹ãƒãƒ¼ãƒˆãƒ“ãƒ¼ã‚¯ãƒ«</span>
                <span class="lang-ru">Ğ£Ğ¼Ğ½Ñ‹Ğµ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ¾Ğ±Ğ¸Ğ»Ğ¸</span>
                <span class="lang-es">VehÃ­culos Inteligentes</span>
            </h3>
            <p>
                <span class="lang-el">Î£ÏÎ½Î´ÎµÏƒÎ· Î¼Îµ OBD-II, CAN bus ÎºÎ±Î¹ Ï„ÎµÎ»ÎµÎ¼Î±Ï„Î¹ÎºÎ¬ ÏƒÏ…ÏƒÏ„Î®Î¼Î±Ï„Î± Î³Î¹Î± real-time tracking ÎºÎ±Î¹ rewards.</span>
                <span class="lang-en">Connect via OBD-II, CAN bus and telematics systems for real-time tracking and rewards.</span>
                <span class="lang-ja">OBD-IIã€CANãƒã‚¹ã€ãƒ†ãƒ¬ãƒãƒ†ã‚£ã‚¯ã‚¹ã‚·ã‚¹ãƒ†ãƒ ã§æ¥ç¶šã—ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¿½è·¡ã¨å ±é…¬ã‚’ç²å¾—ã€‚</span>
                <span class="lang-ru">ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· OBD-II, CAN ÑˆĞ¸Ğ½Ñƒ Ğ¸ Ñ‚ĞµĞ»ĞµĞ¼Ğ°Ñ‚Ğ¸ĞºÑƒ Ğ´Ğ»Ñ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¸ Ğ½Ğ°Ğ³Ñ€Ğ°Ğ´.</span>
                <span class="lang-es">ConexiÃ³n vÃ­a OBD-II, CAN bus y telemÃ¡tica para seguimiento y recompensas en tiempo real.</span>
            </p>
            <ul class="tech-features">
                <li>Renault Clio 2024</li>
                <li>Tesla Model S/3/X/Y</li>
                <li>BMW iX / i4</li>
                <li>Mercedes EQS/EQE</li>
                <li>VW ID.4 / ID.Buzz</li>
                <li>Hyundai Ioniq 5/6</li>
                <li>Toyota bZ4X</li>
            </ul>
        </div>

        <div class="tech-card">
            <div class="icon">ğŸ </div>
            <h3>
                <span class="lang-el">ÎˆÎ¾Ï…Ï€Î½Î¿ Î£Ï€Î¯Ï„Î¹</span>
                <span class="lang-en">Smart Home</span>
                <span class="lang-ja">ã‚¹ãƒãƒ¼ãƒˆãƒ›ãƒ¼ãƒ </span>
                <span class="lang-ru">Ğ£Ğ¼Ğ½Ñ‹Ğ¹ Ğ´Ğ¾Ğ¼</span>
                <span class="lang-es">Hogar Inteligente</span>
            </h3>
            <p>
                <span class="lang-el">Î‘Ï…Ï„Î¿Î¼Î±Ï„Î¹ÏƒÎ¼Î¿Î¯ Î³Î¹Î± ÎµÎ½ÎµÏÎ³ÎµÎ¹Î±ÎºÎ® ÎµÎ¾Î¿Î¹ÎºÎ¿Î½ÏŒÎ¼Î·ÏƒÎ· ÎºÎ±Î¹ Î­Î¾Ï…Ï€Î½Î· Î´Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· Ï€ÏŒÏÏ‰Î½.</span>
                <span class="lang-en">Automation for energy savings and smart resource management.</span>
                <span class="lang-ja">çœã‚¨ãƒã¨è³¢ã„ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†ã®ãŸã‚ã®è‡ªå‹•åŒ–ã€‚</span>
                <span class="lang-ru">ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ğ¸ ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸ Ğ¸ ÑƒĞ¼Ğ½Ğ¾Ğ³Ğ¾ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ñ€ĞµÑÑƒÑ€ÑĞ°Ğ¼Ğ¸.</span>
                <span class="lang-es">AutomatizaciÃ³n para ahorro de energÃ­a y gestiÃ³n inteligente de recursos.</span>
            </p>
            <ul class="tech-features">
                <li>Google Nest Hub</li>
                <li>Amazon Echo / Alexa</li>
                <li>Apple HomeKit</li>
                <li>Philips Hue</li>
                <li>Samsung SmartThings</li>
                <li>IKEA Tradfri</li>
            </ul>
        </div>

        <div class="tech-card">
            <div class="icon">ğŸ­</div>
            <h3>
                <span class="lang-el">Î’Î¹Î¿Î¼Î·Ï‡Î±Î½Î¹ÎºÎ¬ IoT</span>
                <span class="lang-en">Industrial IoT</span>
                <span class="lang-ja">ç”£æ¥­ç”¨IoT</span>
                <span class="lang-ru">ĞŸÑ€Ğ¾Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ½Ñ‹Ğ¹ IoT</span>
                <span class="lang-es">IoT Industrial</span>
            </h3>
            <p>
                <span class="lang-el">Enterprise-grade Î±Î¹ÏƒÎ¸Î·Ï„Î®ÏÎµÏ‚ ÎºÎ±Î¹ PLC Î³Î¹Î± Î²Î¹Î¿Î¼Î·Ï‡Î±Î½Î¹ÎºÎ­Ï‚ ÎµÏ†Î±ÏÎ¼Î¿Î³Î­Ï‚.</span>
                <span class="lang-en">Enterprise-grade sensors and PLCs for industrial applications.</span>
                <span class="lang-ja">ç”£æ¥­ç”¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å‘ã‘ã®ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºã‚°ãƒ¬ãƒ¼ãƒ‰ã‚»ãƒ³ã‚µãƒ¼ã¨PLCã€‚</span>
                <span class="lang-ru">Ğ”Ğ°Ñ‚Ñ‡Ğ¸ĞºĞ¸ Ğ¸ ĞŸĞ›Ğš Ğ¿Ñ€Ğ¾Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ»Ğ°ÑÑĞ° Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹.</span>
                <span class="lang-es">Sensores y PLCs de grado empresarial para aplicaciones industriales.</span>
            </p>
            <ul class="tech-features">
                <li>Siemens SIMATIC</li>
                <li>ABB Ability</li>
                <li>Schneider Electric</li>
                <li>Rockwell Automation</li>
                <li>Honeywell Forge</li>
            </ul>
        </div>

        <div class="tech-card">
            <div class="icon">ğŸŒ¡ï¸</div>
            <h3>
                <span class="lang-el">Î ÎµÏÎ¹Î²Î±Î»Î»Î¿Î½Ï„Î¹ÎºÎ¿Î¯ Î‘Î¹ÏƒÎ¸Î·Ï„Î®ÏÎµÏ‚</span>
                <span class="lang-en">Environmental Sensors</span>
                <span class="lang-ja">ç’°å¢ƒã‚»ãƒ³ã‚µãƒ¼</span>
                <span class="lang-ru">Ğ­ĞºĞ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ´Ğ°Ñ‚Ñ‡Ğ¸ĞºĞ¸</span>
                <span class="lang-es">Sensores Ambientales</span>
            </h3>
            <p>
                <span class="lang-el">Î Î±ÏÎ±ÎºÎ¿Î»Î¿ÏÎ¸Î·ÏƒÎ· Ï€Î¿Î¹ÏŒÏ„Î·Ï„Î±Ï‚ Î±Î­ÏÎ±, Î½ÎµÏÎ¿Ï ÎºÎ±Î¹ Ï€ÎµÏÎ¹Î²Î±Î»Î»Î¿Î½Ï„Î¹ÎºÏÎ½ ÏƒÏ…Î½Î¸Î·ÎºÏÎ½.</span>
                <span class="lang-en">Monitor air quality, water and environmental conditions.</span>
                <span class="lang-ja">ç©ºæ°—è³ªã€æ°´è³ªã€ç’°å¢ƒæ¡ä»¶ã‚’ç›£è¦–ã€‚</span>
                <span class="lang-ru">ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ° Ğ²Ğ¾Ğ·Ğ´ÑƒÑ…Ğ°, Ğ²Ğ¾Ğ´Ñ‹ Ğ¸ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğ¹ Ğ¾ĞºÑ€ÑƒĞ¶Ğ°ÑÑ‰ĞµĞ¹ ÑÑ€ĞµĞ´Ñ‹.</span>
                <span class="lang-es">Monitoreo de calidad del aire, agua y condiciones ambientales.</span>
            </p>
            <ul class="tech-features">
                <li>CO2 / PM2.5 / PM10</li>
                <li>Temperature & Humidity</li>
                <li>Water Quality (pH, TDS)</li>
                <li>Noise Level Monitoring</li>
                <li>Solar Radiation</li>
            </ul>
        </div>

        <div class="tech-card">
            <div class="icon">âš¡</div>
            <h3>
                <span class="lang-el">Î•Î½Î­ÏÎ³ÎµÎ¹Î± & Grid</span>
                <span class="lang-en">Energy & Grid</span>
                <span class="lang-ja">ã‚¨ãƒãƒ«ã‚®ãƒ¼ï¼†ã‚°ãƒªãƒƒãƒ‰</span>
                <span class="lang-ru">Ğ­Ğ½ĞµÑ€Ğ³Ğ¸Ñ Ğ¸ ÑĞµÑ‚ÑŒ</span>
                <span class="lang-es">EnergÃ­a y Red</span>
            </h3>
            <p>
                <span class="lang-el">ÎˆÎ¾Ï…Ï€Î½Î¿Î¹ Î¼ÎµÏ„ÏÎ·Ï„Î­Ï‚ ÎºÎ±Î¹ Î´Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· ÎµÎ½ÎµÏÎ³ÎµÎ¹Î±ÎºÎ¿Ï Î´Î¹ÎºÏ„ÏÎ¿Ï….</span>
                <span class="lang-en">Smart meters and energy grid management.</span>
                <span class="lang-ja">ã‚¹ãƒãƒ¼ãƒˆãƒ¡ãƒ¼ã‚¿ãƒ¼ã¨ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚°ãƒªãƒƒãƒ‰ç®¡ç†ã€‚</span>
                <span class="lang-ru">Ğ£Ğ¼Ğ½Ñ‹Ğµ ÑÑ‡Ñ‘Ñ‚Ñ‡Ğ¸ĞºĞ¸ Ğ¸ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ½ĞµÑ€Ğ³Ğ¾ÑĞµÑ‚ÑŒÑ.</span>
                <span class="lang-es">Medidores inteligentes y gestiÃ³n de red elÃ©ctrica.</span>
            </p>
            <ul class="tech-features">
                <li>Smart Meters (P1/DSMR)</li>
                <li>Solar Inverters</li>
                <li>EV Charging Stations</li>
                <li>Battery Storage</li>
                <li>Grid Frequency Sensors</li>
            </ul>
        </div>

        <div class="tech-card">
            <div class="icon">ğŸ…¿ï¸</div>
            <h3>
                <span class="lang-el">ÎˆÎ¾Ï…Ï€Î½Î¿ Î Î¬ÏÎºÎ¹Î½Î³Îº</span>
                <span class="lang-en">Smart Parking</span>
                <span class="lang-ja">ã‚¹ãƒãƒ¼ãƒˆãƒ‘ãƒ¼ã‚­ãƒ³ã‚°</span>
                <span class="lang-ru">Ğ£Ğ¼Ğ½Ğ°Ñ Ğ¿Ğ°Ñ€ĞºĞ¾Ğ²ĞºĞ°</span>
                <span class="lang-es">Estacionamiento Inteligente</span>
            </h3>
            <p>
                <span class="lang-el">Real-time Î´Î¹Î±Î¸ÎµÏƒÎ¹Î¼ÏŒÏ„Î·Ï„Î± ÎºÎ±Î¹ ÎºÏÎ¬Ï„Î·ÏƒÎ· Î¸Î­ÏƒÎµÏ‰Î½ Î¼Îµ THR.</span>
                <span class="lang-en">Real-time availability and spot reservation with THR.</span>
                <span class="lang-ja">ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®ç©ºãçŠ¶æ³ã¨THRã§ã®äºˆç´„ã€‚</span>
                <span class="lang-ru">Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¸ Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¼ĞµÑÑ‚ Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ñ THR.</span>
                <span class="lang-es">Disponibilidad en tiempo real y reserva de espacios con THR.</span>
            </p>
            <ul class="tech-features">
                <li>Ultrasonic Sensors</li>
                <li>Camera Detection (AI)</li>
                <li>RFID/NFC Access</li>
                <li>License Plate Recognition</li>
            </ul>
        </div>
    </div>
</div>

<!-- Supported Vehicle Brands -->
<div class="iot-section">
    <h2>ğŸš˜
        <span class="lang-el">Î£Ï…Î¼Î²Î±Ï„Î­Ï‚ ÎœÎ¬ÏÎºÎµÏ‚ ÎŸÏ‡Î·Î¼Î¬Ï„Ï‰Î½</span>
        <span class="lang-en">Compatible Vehicle Brands</span>
        <span class="lang-ja">å¯¾å¿œè»Šä¸¡ãƒ–ãƒ©ãƒ³ãƒ‰</span>
        <span class="lang-ru">Ğ¡Ğ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ñ‹Ğµ Ğ¼Ğ°Ñ€ĞºĞ¸ Ğ°Ğ²Ñ‚Ğ¾</span>
        <span class="lang-es">Marcas de VehÃ­culos Compatibles</span>
    </h2>

    <div class="vehicle-brands">
        <span class="brand-badge active">ğŸ‡«ğŸ‡· Renault</span>
        <span class="brand-badge active">ğŸ‡ºğŸ‡¸ Tesla</span>
        <span class="brand-badge">ğŸ‡©ğŸ‡ª BMW</span>
        <span class="brand-badge">ğŸ‡©ğŸ‡ª Mercedes-Benz</span>
        <span class="brand-badge">ğŸ‡©ğŸ‡ª Volkswagen</span>
        <span class="brand-badge">ğŸ‡©ğŸ‡ª Audi</span>
        <span class="brand-badge">ğŸ‡°ğŸ‡· Hyundai</span>
        <span class="brand-badge">ğŸ‡°ğŸ‡· Kia</span>
        <span class="brand-badge">ğŸ‡¯ğŸ‡µ Toyota</span>
        <span class="brand-badge">ğŸ‡¯ğŸ‡µ Nissan</span>
        <span class="brand-badge">ğŸ‡¯ğŸ‡µ Honda</span>
        <span class="brand-badge">ğŸ‡ºğŸ‡¸ Ford</span>
        <span class="brand-badge">ğŸ‡ºğŸ‡¸ Chevrolet</span>
        <span class="brand-badge">ğŸ‡¬ğŸ‡§ Jaguar</span>
        <span class="brand-badge">ğŸ‡¸ğŸ‡ª Volvo</span>
        <span class="brand-badge">ğŸ‡¨ğŸ‡³ BYD</span>
        <span class="brand-badge">ğŸ‡¨ğŸ‡³ NIO</span>
    </div>
</div>

<!-- IoT Node Packs for Purchase -->
<div class="iot-section">
    <h2>ğŸ’³
        <span class="lang-el">Î‘Î³Î¿ÏÎ¬ IoT Node Packs</span>
        <span class="lang-en">Purchase IoT Node Packs</span>
        <span class="lang-ja">IoTãƒãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯ã‚’è³¼å…¥</span>
        <span class="lang-ru">ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ Ğ¿Ğ°ĞºĞµÑ‚Ñ‹ IoT ÑƒĞ·Ğ»Ğ¾Ğ²</span>
        <span class="lang-es">Comprar Paquetes de Nodos IoT</span>
    </h2>

    <div class="packs-grid">
        <div class="pack-card">
            <div class="pack-icon">ğŸš—</div>
            <div class="pack-name">Starter Vehicle</div>
            <div class="pack-price">â‚¬49<small>/one-time</small></div>
            <ul class="pack-features">
                <li>1 OBD-II Thronos Node</li>
                <li>Basic telemetry data</li>
                <li>Up to 100 THR/month rewards</li>
                <li>Mobile app access</li>
                <li>Email support</li>
            </ul>
            <button class="pack-btn" onclick="purchasePack('starter_vehicle', 49)">
                <span class="lang-el">Î‘Î³Î¿ÏÎ¬ Ï„ÏÏÎ±</span>
                <span class="lang-en">Purchase Now</span>
                <span class="lang-ja">ä»Šã™ãè³¼å…¥</span>
                <span class="lang-ru">ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ ÑĞµĞ¹Ñ‡Ğ°Ñ</span>
                <span class="lang-es">Comprar Ahora</span>
            </button>
        </div>

        <div class="pack-card popular">
            <div class="pack-icon">ğŸ </div>
            <div class="pack-name">Smart Home Bundle</div>
            <div class="pack-price">â‚¬149<small>/one-time</small></div>
            <ul class="pack-features">
                <li>1 Thronos Gateway Hub</li>
                <li>3 Environmental Sensors</li>
                <li>1 Smart Meter Interface</li>
                <li>Up to 500 THR/month rewards</li>
                <li>Priority support</li>
                <li>Dashboard access</li>
            </ul>
            <button class="pack-btn" onclick="purchasePack('smart_home', 149)">
                <span class="lang-el">Î‘Î³Î¿ÏÎ¬ Ï„ÏÏÎ±</span>
                <span class="lang-en">Purchase Now</span>
                <span class="lang-ja">ä»Šã™ãè³¼å…¥</span>
                <span class="lang-ru">ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ ÑĞµĞ¹Ñ‡Ğ°Ñ</span>
                <span class="lang-es">Comprar Ahora</span>
            </button>
        </div>

        <div class="pack-card">
            <div class="pack-icon">ğŸ­</div>
            <div class="pack-name">Industrial Pro</div>
            <div class="pack-price">â‚¬499<small>/one-time</small></div>
            <ul class="pack-features">
                <li>1 Industrial Gateway</li>
                <li>10 Sensor Nodes</li>
                <li>PLC Integration Kit</li>
                <li>Up to 2000 THR/month rewards</li>
                <li>24/7 Priority support</li>
                <li>On-site installation</li>
            </ul>
            <button class="pack-btn" onclick="purchasePack('industrial', 499)">
                <span class="lang-el">Î‘Î³Î¿ÏÎ¬ Ï„ÏÏÎ±</span>
                <span class="lang-en">Purchase Now</span>
                <span class="lang-ja">ä»Šã™ãè³¼å…¥</span>
                <span class="lang-ru">ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ ÑĞµĞ¹Ñ‡Ğ°Ñ</span>
                <span class="lang-es">Comprar Ahora</span>
            </button>
        </div>

        <div class="pack-card">
            <div class="pack-icon">ğŸ¢</div>
            <div class="pack-name">Enterprise Fleet</div>
            <div class="pack-price">Custom</div>
            <ul class="pack-features">
                <li>Unlimited vehicle nodes</li>
                <li>Custom integration</li>
                <li>White-label solution</li>
                <li>SLA guarantee</li>
                <li>Dedicated account manager</li>
                <li>API access</li>
            </ul>
            <button class="pack-btn enterprise" onclick="contactEnterprise()">
                <span class="lang-el">Î•Ï€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î±</span>
                <span class="lang-en">Contact Sales</span>
                <span class="lang-ja">ãŠå•ã„åˆã‚ã›</span>
                <span class="lang-ru">Ğ¡Ğ²ÑĞ·Ğ°Ñ‚ÑŒÑÑ</span>
                <span class="lang-es">Contactar Ventas</span>
            </button>
        </div>
    </div>

    <div class="stripe-secure">
        <span>ğŸ”’
            <span class="lang-el">Î‘ÏƒÏ†Î±Î»ÎµÎ¯Ï‚ Ï€Î»Î·ÏÏ‰Î¼Î­Ï‚ Î¼Îµ</span>
            <span class="lang-en">Secure payments with</span>
            <span class="lang-ja">å®‰å…¨ãªæ”¯æ‰•ã„</span>
            <span class="lang-ru">Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ñ‹Ğµ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ¸</span>
            <span class="lang-es">Pagos seguros con</span>
        </span>
        <strong style="color: #6366f1;">Stripe</strong>
    </div>
</div>

<!-- Live Smart Parking Demo -->
<div class="iot-section">
    <h2>ğŸ…¿ï¸
        <span class="lang-el">Î–Ï‰Î½Ï„Î±Î½Î® Î•Ï€Î¯Î´ÎµÎ¹Î¾Î· Î Î¬ÏÎºÎ¹Î½Î³Îº</span>
        <span class="lang-en">Live Parking Demo</span>
        <span class="lang-ja">ãƒ©ã‚¤ãƒ–é§è»Šãƒ‡ãƒ¢</span>
        <span class="lang-ru">Ğ”ĞµĞ¼Ğ¾ Ğ¿Ğ°Ñ€ĞºĞ¾Ğ²ĞºĞ¸</span>
        <span class="lang-es">Demo de Estacionamiento</span>
    </h2>

    <div style="margin: 15px 0; font-size: 0.9em;">
        <span style="color:#0f0">â–  <span class="lang-el">Î•Î»ÎµÏÎ¸ÎµÏÎ¿</span><span class="lang-en">Free</span></span> &nbsp;
        <span style="color:#f00">â–  <span class="lang-el">ÎšÎ±Ï„ÎµÎ¹Î»Î·Î¼Î¼Î­Î½Î¿</span><span class="lang-en">Occupied</span></span> &nbsp;
        <span style="color:#ff0">â–  <span class="lang-el">ÎšÏÎ±Ï„Î·Î¼Î­Î½Î¿</span><span class="lang-en">Reserved</span></span>
    </div>

    <div class="parking-grid" id="parkingGrid"></div>
</div>

<!-- Water Management Panel -->
<div class="iot-section">
    <div class="water-panel">
        <h2 style="color: #0099ff; margin-bottom: 20px;">ğŸ’§
            <span class="lang-el">Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· Î¥Î´Î¬Ï„Ï‰Î½</span>
            <span class="lang-en">Water Management</span>
            <span class="lang-ja">æ°´ç®¡ç†</span>
            <span class="lang-ru">Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ²Ğ¾Ğ´Ğ¾Ğ¹</span>
            <span class="lang-es">GestiÃ³n del Agua</span>
        </h2>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
            <div>
                <h4>Reservoir A (Main)</h4>
                <div class="water-level"><div id="waterA" class="water-fill" style="width:75%">75%</div></div>
                <p style="font-size: 0.8em; color: #888; margin-top: 8px;">Quality: Good (pH 7.2) | Temp: 18Â°C</p>
            </div>
            <div>
                <h4>Reservoir B (Reserve)</h4>
                <div class="water-level"><div id="waterB" class="water-fill" style="width:40%">40%</div></div>
                <p style="font-size: 0.8em; color: #888; margin-top: 8px;">Quality: Excellent (pH 7.0) | Temp: 16Â°C</p>
            </div>
        </div>
    </div>
</div>

<!-- Language Toggle -->
<button class="lang-toggle-iot" onclick="toggleLanguage()">ğŸŒ GR</button>

<!-- Reservation Modal -->
<div id="reserveModal" class="modal">
    <div class="modal-content">
        <h3>ğŸ…¿ï¸
            <span class="lang-el">ÎšÏÎ¬Ï„Î·ÏƒÎ· Î˜Î­ÏƒÎ·Ï‚</span>
            <span class="lang-en">Reserve Spot</span>
        </h3>
        <p id="modalSpotId" style="font-size: 1.5em; color: #00ff66;"></p>
        <p>
            <span class="lang-el">ÎšÏŒÏƒÏ„Î¿Ï‚:</span>
            <span class="lang-en">Cost:</span>
            <strong style="color: #ffd700;">5 THR</strong> / hour
        </p>
        <div id="modalMsg" style="margin: 15px 0; min-height: 20px;"></div>
        <div style="display: flex; gap: 10px;">
            <button class="pack-btn" onclick="confirmReservation()">
                <span class="lang-el">Î•Ï€Î¹Î²ÎµÎ²Î±Î¯Ï‰ÏƒÎ·</span>
                <span class="lang-en">Confirm</span>
            </button>
            <button class="pack-btn" style="background: #333; color: #fff;" onclick="closeModal()">
                <span class="lang-el">Î‘ÎºÏÏÏ‰ÏƒÎ·</span>
                <span class="lang-en">Cancel</span>
            </button>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
const $ = (id) => document.getElementById(id);

// Language (data-i18n with safe fallback)
const LANG_SEQUENCE = ['gr', 'en', 'ja', 'es', 'ru'];
const LANG_ALIAS = { el: 'gr' };
const DEFAULT_LANG = 'en';
let TRANSLATIONS_CACHE = null;

function normalizeLang(lang) {
    if (!lang) return DEFAULT_LANG;
    const alias = LANG_ALIAS[lang];
    const normalized = alias || lang;
    return LANG_SEQUENCE.includes(normalized) ? normalized : DEFAULT_LANG;
}

function harvestTranslations() {
    const store = {};
    const langRegex = /lang-([a-z]+)/;
    document.querySelectorAll('.lang-el, .lang-en, .lang-ja, .lang-ru, .lang-es').forEach((node) => {
        const parent = node.parentElement;
        if (!parent) return;
        if (!parent.dataset.i18n) {
            parent.dataset.i18n = `auto-i18n-${Object.keys(store).length}`;
        }
        const key = parent.dataset.i18n;
        const match = node.className.match(langRegex);
        const lang = normalizeLang(match && match[1]);
        store[key] = store[key] || {};
        store[key][lang] = node.textContent.trim();
    });
    document.querySelectorAll('[data-i18n]').forEach((node) => {
        const key = node.dataset.i18n;
        store[key] = store[key] || {};
        const fallback = node.dataset.i18nDefault || node.textContent.trim();
        if (!store[key][DEFAULT_LANG]) {
            store[key][DEFAULT_LANG] = fallback;
        }
    });
    return store;
}

function applyTranslations(langOverride) {
    const lang = normalizeLang(langOverride || localStorage.getItem('lang'));
    localStorage.setItem('lang', lang);
    document.documentElement.lang = lang;

    if (!TRANSLATIONS_CACHE) {
        TRANSLATIONS_CACHE = harvestTranslations();
    }

    try {
        document.querySelectorAll('[data-i18n]').forEach((node) => {
            const key = node.dataset.i18n;
            const table = TRANSLATIONS_CACHE[key] || {};
            const fallback = table[DEFAULT_LANG] || node.dataset.i18nDefault || node.textContent;
            const value = table[lang] || fallback || key;
            if (node.dataset.i18nAttr === 'placeholder') {
                node.placeholder = value;
            } else {
                node.textContent = value;
            }
        });
    } catch (err) {
        console.warn('translation apply failed', err);
        document.querySelectorAll('[data-i18n]').forEach((node) => {
            const fallback = node.dataset.i18nDefault || node.textContent;
            if (node.dataset.i18nAttr === 'placeholder') {
                node.placeholder = fallback;
            } else {
                node.textContent = fallback;
            }
        });
    }

    const btn = document.querySelector('.lang-toggle-iot');
    if (btn) btn.textContent = 'ğŸŒ ' + lang.toUpperCase();
}

function toggleLanguage() {
    const current = normalizeLang(localStorage.getItem('lang'));
    const idx = LANG_SEQUENCE.indexOf(current);
    const next = LANG_SEQUENCE[(idx + 1) % LANG_SEQUENCE.length];
    applyTranslations(next);
}

// Stripe Purchase
window.purchasePack = async function purchasePack(packId, price) {
    const wallet = localStorage.getItem('thr_address');
    if (!wallet) {
        alert('Please connect your wallet first!');
        window.location.href = '/';
        return;
    }

    try {
        const res = await fetch('/api/stripe/create-checkout', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                pack_id: packId,
                price_cents: price * 100,
                wallet: wallet
            })
        });
        const data = await res.json();

        if (data.url) {
            window.location.href = data.url;
        } else {
            alert(data.error || 'Failed to create checkout session');
        }
    } catch (e) {
        console.error('Purchase error:', e);
        alert('Payment service unavailable. Please try again later.');
    }
}

function contactEnterprise() {
    window.location.href = 'mailto:enterprise@thronos.io?subject=Enterprise Fleet Inquiry';
}

// Parking Demo
const SPOTS = Array.from({length: 12}, (_, i) => ({
    id: `P-${101+i}`,
    status: Math.random() > 0.65 ? 'occupied' : 'free'
}));

let selectedSpot = null;

function renderParking() {
    const grid = $('parkingGrid');
    grid.innerHTML = '';

    SPOTS.forEach(spot => {
        const div = document.createElement('div');
        div.className = `spot ${spot.status}`;
        div.innerHTML = `
            <div class="spot-id">${spot.id}</div>
            <div class="spot-status">${spot.status.toUpperCase()}</div>
        `;

        if (spot.status === 'free') {
            div.onclick = () => openReserveModal(spot);
        }

        grid.appendChild(div);
    });
}

function openReserveModal(spot) {
    const wallet = localStorage.getItem('thr_address');
    if (!wallet) {
        alert("Please connect your wallet first!");
        return;
    }
    selectedSpot = spot;
    $('modalSpotId').textContent = spot.id;
    $('modalMsg').textContent = '';
    $('reserveModal').style.display = 'flex';
}

function closeModal() {
    $('reserveModal').style.display = 'none';
    selectedSpot = null;
}

async function confirmReservation() {
    const wallet = localStorage.getItem('thr_address');
    if (!wallet || !selectedSpot) return;

    $('modalMsg').style.color = '#ff0';
    $('modalMsg').textContent = 'Processing...';

    // Simulate reservation
    setTimeout(() => {
        const spotIdx = SPOTS.findIndex(s => s.id === selectedSpot.id);
        if (spotIdx >= 0) {
            SPOTS[spotIdx].status = 'reserved';
        }
        $('modalMsg').style.color = '#0f0';
        $('modalMsg').textContent = 'âœ… Reserved!';
        renderParking();
        setTimeout(closeModal, 1500);
    }, 1000);
}

// Water Simulation
function updateWater() {
    const lvlA = 70 + Math.random() * 10;
    const lvlB = 35 + Math.random() * 10;
    $('waterA').style.width = lvlA + '%';
    $('waterA').textContent = Math.round(lvlA) + '%';
    $('waterB').style.width = lvlB + '%';
    $('waterB').textContent = Math.round(lvlB) + '%';
}

// Init
document.addEventListener('DOMContentLoaded', () => {
    applyTranslations();
    renderParking();
    applyTranslations();
    updateWater();
    setInterval(updateWater, 5000);
});
</script>
{% endblock %}
